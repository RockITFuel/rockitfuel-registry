{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "helpers",
  "type": "registry:block",
  "title": "Helper Components",
  "description": "Utility components for actions, empty states, loading states, and more",
  "dependencies": ["debounce", "lucide-solid"],
  "files": [
    {
      "path": "components/helpers/action-wrapper.tsx",
      "type": "registry:component",
      "content": "import { type Action, type CustomResponse, useAction } from \"@solidjs/router\";\nimport debounce from \"debounce\";\nimport type { Accessor, JSX } from \"solid-js\";\nimport useLoading from \"~/hooks/use-loading\";\n\ntype NarrowResponse<T> = T extends CustomResponse<infer U>\n  ? U\n  : Exclude<T, Response>;\n\ntype Props<T extends any[], U> = {\n  action: Action<T, U>;\n  delayLoadingTime?: number;\n  debounce?: number;\n  convertDatesToUTC?: boolean;\n  onError?: (error: Error) => void;\n  onSuccess?: (e: NarrowResponse<U>) => void;\n  children: (props: {\n    isLoading: Accessor<boolean>;\n    action: debounce.DebouncedFunction<\n      (...args: Parameters<Action<T, U>>) => Promise<void>\n    >;\n  }) => JSX.Element;\n};\n\n// Utility function to convert a Date to UTC\nfunction convertToUTC(date: Date): Date {\n  return new Date(\n    Date.UTC(\n      date.getFullYear(),\n      date.getMonth(),\n      date.getDate(),\n      date.getHours(),\n      date.getMinutes(),\n      date.getSeconds(),\n      date.getMilliseconds()\n    )\n  );\n}\n\n// Utility function to recursively convert Date objects to UTC\nfunction convertDatesToUTC<T>(obj: T): T {\n  if (obj === null || obj === undefined) {\n    return obj;\n  }\n\n  if (obj instanceof Date) {\n    return convertToUTC(obj) as T;\n  }\n\n  if (Array.isArray(obj)) {\n    return obj.map((item) => convertDatesToUTC(item)) as T;\n  }\n\n  if (typeof obj === \"object\") {\n    const converted: any = {};\n    for (const [key, value] of Object.entries(obj)) {\n      converted[key] = convertDatesToUTC(value);\n    }\n    return converted;\n  }\n\n  return obj;\n}\n\nexport default function ActionWrapper<T extends any[], U>(props: Props<T, U>) {\n  const handleAction = useAction(props.action);\n  const [isLoading, setIsLoading] = useLoading(props.delayLoadingTime);\n\n  const action = async (...args: Parameters<Action<T, U>>) => {\n    setIsLoading();\n    try {\n      // Convert all Date fields to UTC before passing to the action if enabled\n      const convertedArgs = props.convertDatesToUTC\n        ? (args.map((arg) => convertDatesToUTC(arg)) as Parameters<\n            Action<T, U>\n          >)\n        : args;\n      await handleAction(...convertedArgs).then((res) =>\n        props.onSuccess?.(res),\n      );\n    } catch (error) {\n      console.error(\"error: \", JSON.stringify(error, null, 2));\n      if (error instanceof Error) {\n        props.onError?.(error);\n      }\n    }\n    setIsLoading.cancel();\n  };\n  const debouncedAction = debounce(action, props.debounce ?? 300);\n\n  return props.children({ isLoading, action: debouncedAction });\n}\n"
    },
    {
      "path": "components/helpers/action-button.tsx",
      "type": "registry:component",
      "content": "import * as ButtonPrimitive from \"@kobalte/core/button\";\nimport type { PolymorphicProps } from \"@kobalte/core/polymorphic\";\nimport { type Action, useAction } from \"@solidjs/router\";\nimport type { VariantProps } from \"class-variance-authority\";\nimport { cva } from \"class-variance-authority\";\nimport { LoaderCircle } from \"lucide-solid\";\nimport {\n\ttype Accessor,\n\tcreateEffect,\n\tcreateSignal,\n\ttype JSX,\n\tShow,\n\tsplitProps,\n\ttype ValidComponent,\n} from \"solid-js\";\nimport { cn } from \"~/lib/utils/shadcn\";\n\nconst buttonVariants = cva(\n\t\"inline-flex items-center justify-center rounded-md font-medium text-sm ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\",\n\t{\n\t\tvariants: {\n\t\t\tvariant: {\n\t\t\t\tdefault: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n\t\t\t\tdestructive:\n\t\t\t\t\t\"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n\t\t\t\toutline:\n\t\t\t\t\t\"border border-input hover:bg-accent hover:text-accent-foreground\",\n\t\t\t\tsecondary:\n\t\t\t\t\t\"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n\t\t\t\tghost: \"hover:bg-accent hover:text-accent-foreground\",\n\t\t\t\tlink: \"text-primary underline-offset-4 hover:underline\",\n\t\t\t},\n\t\t\tsize: {\n\t\t\t\tdefault: \"h-10 px-4 py-2\",\n\t\t\t\tsm: \"h-9 rounded-md px-3\",\n\t\t\t\tlg: \"h-11 rounded-md px-8\",\n\t\t\t\ticon: \"size-10\",\n\t\t\t},\n\t\t},\n\t\tdefaultVariants: {\n\t\t\tvariant: \"default\",\n\t\t\tsize: \"default\",\n\t\t},\n\t},\n);\n\ntype ButtonProps<T extends Array<any>, U> = ButtonPrimitive.ButtonRootProps &\n\tVariantProps<typeof buttonVariants> & {\n\t\tclass?: string | undefined;\n\t\tchildren?: JSX.Element | ((isLoading: Accessor<boolean>) => JSX.Element);\n\t\taction: Action<T, U>;\n\t\tloadingIndicator?: boolean;\n\t\tactionArg: Parameters<Action<T, U>>;\n\t\tonClick?: (actionPromise: Promise<void>) => void;\n\t\tonError?: (error: Error) => void;\n\t\tonSucces?: () => void;\n\t};\n\nconst ActionButton = <\n\tT extends ValidComponent = \"button\",\n\tA extends Array<any> = [],\n\tR = void,\n>(\n\tprops: PolymorphicProps<T, ButtonProps<A, R>>,\n) => {\n\tconst [local, others] = splitProps(props as ButtonProps<A, R>, [\n\t\t\"variant\",\n\t\t\"size\",\n\t\t\"class\",\n\t\t\"action\",\n\t\t\"onClick\",\n\t\t\"children\",\n\t\t\"onError\",\n\t\t\"onSucces\",\n\t\t\"actionArg\",\n\t\t\"onClick\",\n\t\t\"loadingIndicator\",\n\t]);\n\tconst handleAction = useAction(local.action);\n\tconst [isLoading, setIsLoading] = createSignal(false);\n\n\tcreateEffect(() => {\n\t\tconsole.log(\"isLoading: \", isLoading());\n\t});\n\treturn (\n\t\t<ButtonPrimitive.Root\n\t\t\tclass={cn(\n\t\t\t\tbuttonVariants({ variant: local.variant, size: local.size }),\n\t\t\t\tlocal.class,\n\t\t\t)}\n\t\t\tonClick={() => {\n\t\t\t\tsetIsLoading(true);\n\t\t\t\tconst promise = handleAction(...local.actionArg)\n\t\t\t\t\t.then((e) => {\n\t\t\t\t\t\tif (e instanceof Error) {\n\t\t\t\t\t\t\treturn local.onError?.(e);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlocal.onSucces?.();\n\t\t\t\t\t})\n\t\t\t\t\t.finally(() => {\n\t\t\t\t\t\tconsole.log(\"finally\");\n\t\t\t\t\t\tsetIsLoading(false);\n\t\t\t\t\t});\n\t\t\t\tlocal.onClick?.(promise);\n\t\t\t}}\n\t\t\t{...others}\n\t\t\tchildren={\n\t\t\t\ttypeof local.children === \"function\" ? (\n\t\t\t\t\tlocal.children(isLoading)\n\t\t\t\t) : (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<Show fallback={local.children} when={local.loadingIndicator}>\n\t\t\t\t\t\t\t<div class=\"\">\n\t\t\t\t\t\t\t\t<Show when={isLoading()}>\n\t\t\t\t\t\t\t\t\t<LoaderCircle class=\"mr-2 h-4 w-4 animate-spin\" />\n\t\t\t\t\t\t\t\t</Show>\n\t\t\t\t\t\t\t\t<Show when={local.size !== \"icon\"}>\n\t\t\t\t\t\t\t\t\t<span>{local.children}</span>\n\t\t\t\t\t\t\t\t</Show>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Show>\n\t\t\t\t\t</>\n\t\t\t\t)\n\t\t\t}\n\t\t/>\n\t);\n};\n\nexport default ActionButton;\n// children={\n//     typeof local.children === \"function\" ? (\n//       local.children(isLoading)\n//     ) : (\n//       <>\n//         <Show when={local.loadingIndicator} fallback={local.children}>\n//           <div class=\"\">\n//             <Show when={isLoading()}>\n//               <LoaderCircle class=\"mr-2 h-4 w-4 animate-spin\" />\n//             </Show>\n//             <Show when={local.size !== \"icon\"}>\n//               <span>{local.children}</span>\n//             </Show>\n//           </div>\n//         </Show>\n//       </>\n//     )\n//   }\n"
    },
    {
      "path": "components/helpers/empty-state.tsx",
      "type": "registry:component",
      "content": "import { SearchXIcon } from \"lucide-solid\";\nimport { type JSX, Show } from \"solid-js\";\n\nexport type EmptyStateProps = {\n\ttitle?: string;\n\tdescription?: string;\n\ticon?: JSX.Element;\n\tclass?: string;\n};\n\nexport default function EmptyState(props: EmptyStateProps) {\n\treturn (\n\t\t<div\n\t\t\tclass={`flex flex-col items-center justify-center text-center ${props.class || \"\"}`}\n\t\t>\n\t\t\t<Show\n\t\t\t\twhen={props.icon}\n\t\t\t\tfallback={\n\t\t\t\t\t<SearchXIcon class=\"w-12 h-12 mx-auto text-muted-foreground mb-4\" />\n\t\t\t\t}\n\t\t\t>\n\t\t\t\t{props.icon}\n\t\t\t</Show>\n\t\t\t<h3 class=\"text-lg font-medium mb-2\">\n\t\t\t\t{props.title || \"Geen resultaten gevonden\"}\n\t\t\t</h3>\n\t\t\t<p class=\"text-muted-foreground\">\n\t\t\t\t{props.description ||\n\t\t\t\t\t\"Probeer je zoekopdracht aan te passen of check later terug.\"}\n\t\t\t</p>\n\t\t</div>\n\t);\n}\n"
    },
    {
      "path": "components/helpers/empty-table.tsx",
      "type": "registry:component",
      "content": "import { CalendarIcon, PandaIcon, SearchXIcon } from \"lucide-solid\";\nimport { type JSX, Show } from \"solid-js\";\nimport { TableCell, TableRow } from \"../ui/table\";\n\nexport type EmptyTableProps = {\n\ttitle?: string;\n\tdescription?: string;\n\ticon?: JSX.Element;\n};\n\nexport default function EmptyTableRow(props: EmptyTableProps) {\n\treturn (\n\t\t<TableRow>\n\t\t\t<TableCell colSpan={999}>\n\t\t\t\t<div class=\"text-center py-8\">\n\t\t\t\t\t<Show\n\t\t\t\t\t\twhen={props.icon}\n\t\t\t\t\t\tfallback={\n\t\t\t\t\t\t\t<SearchXIcon class=\"w-12 h-12 mx-auto text-muted-foreground mb-4\" />\n\t\t\t\t\t\t}\n\t\t\t\t\t>\n\t\t\t\t\t\t{props.icon}\n\t\t\t\t\t</Show>\n\t\t\t\t\t<h3 class=\"text-lg font-medium mb-2\">\n\t\t\t\t\t\t{props.title || \"Geen resultaten gevonden\"}\n\t\t\t\t\t</h3>\n\t\t\t\t\t<p class=\"text-muted-foreground\">\n\t\t\t\t\t\t{props.description ||\n\t\t\t\t\t\t\t\"Probeer je zoekopdracht aan te passen of check later terug.\"}\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</TableCell>\n\t\t</TableRow>\n\t);\n}\n"
    },
    {
      "path": "components/helpers/loading-table.tsx",
      "type": "registry:component",
      "content": "import { LoaderCircle } from \"lucide-solid\";\nimport { type JSX, Show } from \"solid-js\";\nimport { TableCell, TableRow } from \"../ui/table\";\n\nexport type LoadingTableProps = {\n\ttitle?: string;\n\tdescription?: string;\n\ticon?: JSX.Element;\n};\n\nexport default function LoadingTableRow(props: LoadingTableProps) {\n\treturn (\n\t\t<TableRow>\n\t\t\t<TableCell colSpan={999}>\n\t\t\t\t<div class=\"text-center py-8\">\n\t\t\t\t\t<Show\n\t\t\t\t\t\twhen={props.icon}\n\t\t\t\t\t\tfallback={\n\t\t\t\t\t\t\t<LoaderCircle class=\"w-12 h-12 mx-auto text-muted-foreground mb-4 animate-spin\" />\n\t\t\t\t\t\t}\n\t\t\t\t\t>\n\t\t\t\t\t\t{props.icon}\n\t\t\t\t\t</Show>\n\t\t\t\t\t<h3 class=\"text-lg font-medium mb-2\">{props.title || \"Laden...\"}</h3>\n\t\t\t\t\t<p class=\"text-muted-foreground\">\n\t\t\t\t\t\t{props.description || \"Even geduld, we halen de gegevens op.\"}\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</TableCell>\n\t\t</TableRow>\n\t);\n}\n"
    },
    {
      "path": "components/helpers/expandable.tsx",
      "type": "registry:component",
      "content": "import { makeEventListener } from \"@solid-primitives/event-listener\";\nimport { isClient } from \"@solid-primitives/utils\";\nimport clsx from \"clsx\";\nimport { createEffect, createSignal, type JSX, on, onMount } from \"solid-js\";\n\ntype ExpandableProps = {\n\tclass?: string;\n\tchildren: JSX.Element;\n\texpanded: boolean;\n};\n\n/**\n * Wrapper component to vertically expand or collapse content.\n */\nexport function Expandable(props: ExpandableProps) {\n\t// Create painted, element, element height and frozen children signal\n\tconst [getPainted, setPainted] = createSignal(false);\n\tconst [getElement, setElement] = createSignal<HTMLDivElement>();\n\tconst [getElementHeight, setElementHeight] = createSignal<number>(0);\n\tconst [getFrozenChildren, setFrozenChildren] = createSignal<JSX.Element>();\n\n\t// Set painted to true after DOM has had time to paint\n\tonMount(() => setTimeout(() => setPainted(true)));\n\n\t// Freeze children while element collapses to prevent UI from jumping\n\tcreateEffect(\n\t\ton<boolean, JSX.Element>(\n\t\t\t() => props.expanded,\n\t\t\t(expanded, _, prevChildren) => {\n\t\t\t\tif (!expanded) {\n\t\t\t\t\tsetFrozenChildren(prevChildren);\n\t\t\t\t\tsetTimeout(\n\t\t\t\t\t\t() => setFrozenChildren(),\n\t\t\t\t\t\tNumber.parseFloat(\n\t\t\t\t\t\t\tgetComputedStyle(getElement()!).transitionDuration,\n\t\t\t\t\t\t) * 1000,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\treturn props.children;\n\t\t\t},\n\t\t),\n\t);\n\n\t/**\n\t * Handles the expandable element height.\n\t */\n\tconst handleElementHeight = () =>\n\t\tsetElementHeight(props.expanded ? getElement()!.scrollHeight : 0);\n\n\t// Expand or collapse content when expanded prop change\n\tcreateEffect(on(() => props.expanded, handleElementHeight));\n\n\t// Update element height when window size change\n\tif (isClient) {\n\t\tmakeEventListener(window, \"resize\", handleElementHeight);\n\t}\n\n\treturn (\n\t\t<div\n\t\t\taria-hidden={!props.expanded}\n\t\t\tclass={clsx(\n\t\t\t\t\"h-0 origin-top\",\n\t\t\t\tgetPainted() && \"duration-200\",\n\t\t\t\t!props.expanded && \"-translate-y-2 invisible scale-y-75 opacity-0\",\n\t\t\t\tprops.class,\n\t\t\t)}\n\t\t\tref={setElement}\n\t\t\tstyle={{ height: `${getElementHeight()}px` }}\n\t\t>\n\t\t\t{getFrozenChildren() || props.children}\n\t\t</div>\n\t);\n}\n"
    },
    {
      "path": "components/helpers/re-route.tsx",
      "type": "registry:component",
      "content": "import { useLocation, useNavigate } from \"@solidjs/router\";\nimport { createEffect } from \"solid-js\";\nimport { isDev } from \"solid-js/web\";\n\nexport default function ReRoute({\n\troutes,\n}: {\n\troutes: { from: string[]; to: string }[];\n}) {\n\tconst location = useLocation();\n\tconst navigate = useNavigate();\n\n\tcreateEffect(() => {\n\t\tconsole.debug(\"[ReRoute] Routes:\", routes);\n\t\troutes.forEach(({ from, to }) => {\n\t\t\tif (from.some((f) => location.pathname === f)) {\n\t\t\t\tif (isDev) {\n\t\t\t\t\tconsole.debug(\"[ReRoute] Matched reroute:\", {\n\t\t\t\t\t\tfrom,\n\t\t\t\t\t\tcurrentPath: location.pathname,\n\t\t\t\t\t\tto,\n\t\t\t\t\t\tlocation,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tnavigate(to);\n\t\t\t} else if (isDev) {\n\t\t\t\tconsole.debug(\"[ReRoute] No match for route:\", {\n\t\t\t\t\tcurrentPath: location.pathname,\n\t\t\t\t\tfrom,\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t});\n\treturn <></>;\n}\n"
    },
    {
      "path": "components/helpers/role-badge.tsx",
      "type": "registry:component",
      "content": "import type { Component } from \"solid-js\";\nimport { Badge } from \"~/components/ui/badge\";\n\nexport type RoleBadgeProps = {\n\trole: \"care_taker\" | \"team_lead\" | \"planner\" | \"admin\" | \"read_only\";\n};\n\nconst roleConfig = {\n\tcare_taker: {\n\t\tlabel: \"Hulpverlener\",\n\t\tcolorClass: \"bg-orange-600 hover:bg-orange-700\",\n\t},\n\tteam_lead: {\n\t\tlabel: \"Teamlead\",\n\t\tcolorClass: \"bg-orange-600 hover:bg-orange-700\",\n\t},\n\tplanner: {\n\t\tlabel: \"Planner\",\n\t\tcolorClass: \"bg-orange-600 hover:bg-orange-700\",\n\t},\n\tadmin: {\n\t\tlabel: \"Beheerder\",\n\t\tcolorClass: \"bg-slate-500 hover:bg-slate-600\",\n\t},\n\tread_only: {\n\t\tlabel: \"Management\",\n\t\tcolorClass: \"bg-slate-500 hover:bg-slate-600\",\n\t},\n};\n\nconst RoleBadge: Component<RoleBadgeProps> = (props) => {\n\tconst config = () => roleConfig[props.role];\n\n\treturn (\n\t\t<Badge round variant=\"default\" class={`${config().colorClass} text-white`}>\n\t\t\t{config().label}\n\t\t</Badge>\n\t);\n};\n\nexport default RoleBadge;\n"
    },
    {
      "path": "components/helpers/upsert-dialog-trigger.tsx",
      "type": "registry:component",
      "content": "import { Edit, LoaderCircle, Plus } from \"lucide-solid\";\nimport { createMemo, Show } from \"solid-js\";\nimport { Button } from \"~/components/ui/button\";\nimport { DialogTrigger } from \"~/components/ui/dialog\";\nimport {\n\tTooltip,\n\tTooltipContent,\n\tTooltipTrigger,\n} from \"~/components/ui/tooltip\";\nimport { cn } from \"~/lib/utils/shadcn\";\n\ntype Settings = {\n\ttext?: string;\n\tshowText?: boolean;\n\ttooltipText?: string;\n\tshowTooltip?: boolean;\n};\n\ntype Props = {\n\tisAddMode: boolean;\n\tisLoading: boolean;\n\tonClick?: () => void;\n\tedit?: Settings;\n\tadd?: Settings;\n\tisIcon?: boolean;\n};\n\nexport default function UpsertDialogTrigger(_props: Props) {\n\tconst props = createMemo(\n\t\t() =>\n\t\t\t({\n\t\t\t\t..._props,\n\t\t\t\tadd: _props?.add ?? {\n\t\t\t\t\ttext: \"Toevoegen\",\n\t\t\t\t\tshowText: true,\n\t\t\t\t\ttooltipText: \"Toevoegen\",\n\t\t\t\t\tshowTooltip: false,\n\t\t\t\t},\n\t\t\t\tedit: _props?.edit ?? {\n\t\t\t\t\ttext: \"Bewerken\",\n\t\t\t\t\tshowText: true,\n\t\t\t\t\ttooltipText: \"Bewerken\",\n\t\t\t\t\tshowTooltip: false,\n\t\t\t\t},\n\t\t\t}) satisfies Props,\n\t);\n\treturn (\n\t\t<DialogTrigger onClick={props().onClick}>\n\t\t\t<Tooltip>\n\t\t\t\t<TooltipTrigger>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tsize={props().isIcon ? \"icon\" : \"default\"}\n\t\t\t\t\t\tvariant={props().isAddMode ? \"default\" : \"ghost\"}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Show\n\t\t\t\t\t\t\tfallback={\n\t\t\t\t\t\t\t\tprops().isAddMode ? (\n\t\t\t\t\t\t\t\t\t<Plus class={cn(\"size-4\", props().add.showText && \"mr-2\")} />\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<Edit class={cn(\"size-4\", props().edit.showText && \"mr-2\")} />\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\twhen={props().isLoading}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<LoaderCircle\n\t\t\t\t\t\t\t\tclass={cn(\n\t\t\t\t\t\t\t\t\t\"size-4 animate-spin\",\n\t\t\t\t\t\t\t\t\t(props().isAddMode\n\t\t\t\t\t\t\t\t\t\t? props()?.add?.showText\n\t\t\t\t\t\t\t\t\t\t: props()?.edit?.showText) && \"mr-2\",\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Show>\n\t\t\t\t\t\t{props()?.isAddMode\n\t\t\t\t\t\t\t? props()?.add?.showText && props()?.add?.text\n\t\t\t\t\t\t\t: props()?.edit.showText && props()?.edit.text}\n\t\t\t\t\t</Button>\n\t\t\t\t</TooltipTrigger>\n\t\t\t\t<Show\n\t\t\t\t\twhen={\n\t\t\t\t\t\tprops().isAddMode\n\t\t\t\t\t\t\t? props().add.showTooltip\n\t\t\t\t\t\t\t: props().edit.showTooltip\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t<TooltipContent>\n\t\t\t\t\t\t{props().isAddMode\n\t\t\t\t\t\t\t? props().add.tooltipText\n\t\t\t\t\t\t\t: props().edit.tooltipText}\n\t\t\t\t\t</TooltipContent>\n\t\t\t\t</Show>\n\t\t\t</Tooltip>\n\t\t</DialogTrigger>\n\t);\n}\n"
    },
    {
      "path": "components/helpers/date-range-with-popover.tsx",
      "type": "registry:component",
      "content": "import {\n\ttype DateValue,\n\tuseDatePickerContext,\n} from \"@ark-ui/solid/date-picker\";\nimport { CalendarDate } from \"@internationalized/date\";\nimport {\n\tendOfDay,\n\tendOfMonth,\n\tendOfWeek,\n\tendOfYear,\n\tstartOfDay,\n\tstartOfMonth,\n\tstartOfWeek,\n\tstartOfYear,\n\tsubDays,\n\tsubYears,\n} from \"date-fns\";\nimport { CalendarIcon } from \"lucide-solid\";\nimport { createEffect, createMemo, createSignal, Index, on } from \"solid-js\";\nimport { Button } from \"~/components/ui/button\";\nimport {\n\tDatePicker,\n\tDatePickerContext,\n\tDatePickerControl,\n\tDatePickerInput,\n\tDatePickerNextTrigger,\n\tDatePickerPrevTrigger,\n\tDatePickerRangeText,\n\tDatePickerTable,\n\tDatePickerTableBody,\n\tDatePickerTableCell,\n\tDatePickerTableCellTrigger,\n\tDatePickerTableHead,\n\tDatePickerTableHeader,\n\tDatePickerTableRow,\n\tDatePickerView,\n\tDatePickerViewControl,\n\tDatePickerViewTrigger,\n} from \"~/components/ui/date-picker\";\nimport {\n\tPopover,\n\tPopoverContent,\n\tPopoverTrigger,\n} from \"~/components/ui/popover\";\n\nexport type DateRange = {\n\tstartDate: Date;\n\tendDate: Date;\n};\n\ninterface DayViewProps {\n\tmonthOffset: number;\n}\n\nfunction DayView(props: DayViewProps) {\n\tconst datePicker = useDatePickerContext();\n\tconst offset = createMemo(() =>\n\t\tdatePicker().getOffset({ months: props.monthOffset }),\n\t);\n\n\treturn (\n\t\t<DatePickerTable>\n\t\t\t<DatePickerTableHead>\n\t\t\t\t<DatePickerTableRow>\n\t\t\t\t\t<Index each={datePicker().weekDays}>\n\t\t\t\t\t\t{(weekDay) => (\n\t\t\t\t\t\t\t<DatePickerTableHeader>{weekDay().short}</DatePickerTableHeader>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Index>\n\t\t\t\t</DatePickerTableRow>\n\t\t\t</DatePickerTableHead>\n\t\t\t<DatePickerTableBody>\n\t\t\t\t<Index each={offset().weeks}>\n\t\t\t\t\t{(week) => (\n\t\t\t\t\t\t<DatePickerTableRow>\n\t\t\t\t\t\t\t<Index each={week()}>\n\t\t\t\t\t\t\t\t{(day) => (\n\t\t\t\t\t\t\t\t\t<DatePickerTableCell\n\t\t\t\t\t\t\t\t\t\tvalue={day()}\n\t\t\t\t\t\t\t\t\t\tvisibleRange={offset().visibleRange}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<DatePickerTableCellTrigger>\n\t\t\t\t\t\t\t\t\t\t\t{day().day}\n\t\t\t\t\t\t\t\t\t\t</DatePickerTableCellTrigger>\n\t\t\t\t\t\t\t\t\t</DatePickerTableCell>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</Index>\n\t\t\t\t\t\t</DatePickerTableRow>\n\t\t\t\t\t)}\n\t\t\t\t</Index>\n\t\t\t</DatePickerTableBody>\n\t\t</DatePickerTable>\n\t);\n}\n\ninterface PopoverDateRangePickerProps {\n\tdateRange: DateRange;\n\tonDateRangeChange: (range: DateRange) => void;\n}\n\nexport default function PopoverDateRangePicker(\n\tprops: PopoverDateRangePickerProps,\n) {\n\tconst [value, setValue] = createSignal<DateValue[] | undefined>();\n\tconst [isOpen, setIsOpen] = createSignal(false);\n\n\tconst today = new Date();\n\tconst toCalendarDate = (date: Date) =>\n\t\tnew CalendarDate(date.getFullYear(), date.getMonth() + 1, date.getDate());\n\n\tconst presets = [\n\t\t{\n\t\t\tlabel: \"Vandaag\",\n\t\t\tvalue: [\n\t\t\t\ttoCalendarDate(startOfDay(today)),\n\t\t\t\ttoCalendarDate(endOfDay(today)),\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tlabel: \"Deze week\",\n\t\t\tvalue: [\n\t\t\t\ttoCalendarDate(startOfWeek(today)),\n\t\t\t\ttoCalendarDate(endOfWeek(today)),\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tlabel: \"Laatste 7 dagen\",\n\t\t\tvalue: [toCalendarDate(subDays(today, 7)), toCalendarDate(today)],\n\t\t},\n\t\t{\n\t\t\tlabel: \"Deze maand\",\n\t\t\tvalue: [\n\t\t\t\ttoCalendarDate(startOfMonth(today)),\n\t\t\t\ttoCalendarDate(endOfMonth(today)),\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tlabel: \"Laatste 30 dagen\",\n\t\t\tvalue: [toCalendarDate(subDays(today, 30)), toCalendarDate(today)],\n\t\t},\n\t\t{\n\t\t\tlabel: \"Dit jaar\",\n\t\t\tvalue: [\n\t\t\t\ttoCalendarDate(startOfYear(today)),\n\t\t\t\ttoCalendarDate(endOfYear(today)),\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tlabel: \"Laatste 365 dagen\",\n\t\t\tvalue: [toCalendarDate(subYears(today, 1)), toCalendarDate(today)],\n\t\t},\n\t];\n\n\tcreateEffect(\n\t\ton(value, (value) => {\n\t\t\tif (value && value.length === 2) {\n\t\t\t\tprops.onDateRangeChange({\n\t\t\t\t\tstartDate: new Date(value[0].toString()),\n\t\t\t\t\tendDate: new Date(value[1].toString()),\n\t\t\t\t});\n\t\t\t}\n\t\t}),\n\t);\n\n\treturn (\n\t\t<div class=\"flex items-center gap-2\">\n\t\t\t<DatePicker\n\t\t\t\tdefaultValue={[\n\t\t\t\t\tnew CalendarDate(\n\t\t\t\t\t\tprops.dateRange.startDate.getFullYear(),\n\t\t\t\t\t\tprops.dateRange.startDate.getMonth() + 1,\n\t\t\t\t\t\tprops.dateRange.startDate.getDate(),\n\t\t\t\t\t),\n\t\t\t\t\tnew CalendarDate(\n\t\t\t\t\t\tprops.dateRange.endDate.getFullYear(),\n\t\t\t\t\t\tprops.dateRange.endDate.getMonth() + 1,\n\t\t\t\t\t\tprops.dateRange.endDate.getDate(),\n\t\t\t\t\t),\n\t\t\t\t]}\n\t\t\t\tformat={(e) => {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst parsedDate = new Date(Date.parse(e.toString()));\n\n\t\t\t\t\t\tconst normalizedDate = new Date(\n\t\t\t\t\t\t\tparsedDate.getUTCFullYear(),\n\t\t\t\t\t\t\tparsedDate.getUTCMonth(),\n\t\t\t\t\t\t\tparsedDate.getUTCDate(),\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\treturn new Intl.DateTimeFormat(\"nl-NL\", {\n\t\t\t\t\t\t\tdateStyle: \"long\",\n\t\t\t\t\t\t}).format(normalizedDate);\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\tconsole.error(error);\n\t\t\t\t\t\treturn \"\";\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t\tnumOfMonths={2}\n\t\t\t\tonValueChange={(e) => {\n\t\t\t\t\tsetValue(e.value);\n\t\t\t\t}}\n\t\t\t\tselectionMode=\"range\"\n\t\t\t\tvalue={value()}\n\t\t\t>\n\t\t\t\t<DatePickerControl class=\"flex items-center gap-2\">\n\t\t\t\t\t<DatePickerInput\n\t\t\t\t\t\tclass=\"flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:font-medium file:text-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50\"\n\t\t\t\t\t\tindex={0}\n\t\t\t\t\t/>\n\t\t\t\t\t<span class=\"text-muted-foreground\">tot</span>\n\t\t\t\t\t<DatePickerInput\n\t\t\t\t\t\tclass=\"flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:font-medium file:text-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50\"\n\t\t\t\t\t\tindex={1}\n\t\t\t\t\t/>\n\t\t\t\t</DatePickerControl>\n\t\t\t</DatePicker>\n\n\t\t\t<Popover onOpenChange={setIsOpen} open={isOpen()} placement=\"bottom-end\">\n\t\t\t\t<PopoverTrigger as={Button<\"button\">} size=\"sm\" variant=\"outline\">\n\t\t\t\t\t<CalendarIcon class=\"h-4 w-4\" />\n\t\t\t\t</PopoverTrigger>\n\t\t\t\t<PopoverContent class=\"w-auto p-4\">\n\t\t\t\t\t<DatePicker\n\t\t\t\t\t\tcloseOnSelect={false}\n\t\t\t\t\t\tnumOfMonths={2}\n\t\t\t\t\t\tonValueChange={(e) => {\n\t\t\t\t\t\t\tsetValue(e.value);\n\t\t\t\t\t\t\tif (e.value && e.value.length === 2) {\n\t\t\t\t\t\t\t\tsetIsOpen(false);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t\topen={true}\n\t\t\t\t\t\tselectionMode=\"range\"\n\t\t\t\t\t\tvalue={value()}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div class=\"grid grid-cols-1 gap-4 md:grid-cols-[1fr,auto]\">\n\t\t\t\t\t\t\t<DatePickerView view=\"day\">\n\t\t\t\t\t\t\t\t<DatePickerContext>\n\t\t\t\t\t\t\t\t\t{(api) => (\n\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t<DatePickerViewControl>\n\t\t\t\t\t\t\t\t\t\t\t\t<DatePickerPrevTrigger />\n\t\t\t\t\t\t\t\t\t\t\t\t<DatePickerViewTrigger>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<DatePickerRangeText />\n\t\t\t\t\t\t\t\t\t\t\t\t</DatePickerViewTrigger>\n\t\t\t\t\t\t\t\t\t\t\t\t<DatePickerNextTrigger />\n\t\t\t\t\t\t\t\t\t\t\t</DatePickerViewControl>\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"grid grid-cols-1 gap-4 md:grid-cols-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t<DayView monthOffset={0} />\n\t\t\t\t\t\t\t\t\t\t\t\t<DayView monthOffset={1} />\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</DatePickerContext>\n\t\t\t\t\t\t\t</DatePickerView>\n\t\t\t\t\t\t\t<DatePickerView view=\"month\">\n\t\t\t\t\t\t\t\t<DatePickerContext>\n\t\t\t\t\t\t\t\t\t{(api) => (\n\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t<DatePickerViewControl>\n\t\t\t\t\t\t\t\t\t\t\t\t<DatePickerPrevTrigger />\n\t\t\t\t\t\t\t\t\t\t\t\t<DatePickerViewTrigger>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<DatePickerRangeText />\n\t\t\t\t\t\t\t\t\t\t\t\t</DatePickerViewTrigger>\n\t\t\t\t\t\t\t\t\t\t\t\t<DatePickerNextTrigger />\n\t\t\t\t\t\t\t\t\t\t\t</DatePickerViewControl>\n\t\t\t\t\t\t\t\t\t\t\t<DatePickerTable>\n\t\t\t\t\t\t\t\t\t\t\t\t<DatePickerTableBody>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Index\n\t\t\t\t\t\t\t\t\t\t\t\t\t\teach={api().getMonthsGrid({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolumns: 4,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tformat: \"short\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{(months) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<DatePickerTableRow>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Index each={months()}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{(month) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<DatePickerTableCell value={month().value}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<DatePickerTableCellTrigger>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{month().label}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</DatePickerTableCellTrigger>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</DatePickerTableCell>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Index>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</DatePickerTableRow>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Index>\n\t\t\t\t\t\t\t\t\t\t\t\t</DatePickerTableBody>\n\t\t\t\t\t\t\t\t\t\t\t</DatePickerTable>\n\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</DatePickerContext>\n\t\t\t\t\t\t\t</DatePickerView>\n\t\t\t\t\t\t\t<DatePickerView view=\"year\">\n\t\t\t\t\t\t\t\t<DatePickerContext>\n\t\t\t\t\t\t\t\t\t{(api) => (\n\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t<DatePickerViewControl>\n\t\t\t\t\t\t\t\t\t\t\t\t<DatePickerPrevTrigger />\n\t\t\t\t\t\t\t\t\t\t\t\t<DatePickerViewTrigger>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<DatePickerRangeText />\n\t\t\t\t\t\t\t\t\t\t\t\t</DatePickerViewTrigger>\n\t\t\t\t\t\t\t\t\t\t\t\t<DatePickerNextTrigger />\n\t\t\t\t\t\t\t\t\t\t\t</DatePickerViewControl>\n\t\t\t\t\t\t\t\t\t\t\t<DatePickerTable>\n\t\t\t\t\t\t\t\t\t\t\t\t<DatePickerTableBody>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Index\n\t\t\t\t\t\t\t\t\t\t\t\t\t\teach={api().getYearsGrid({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolumns: 4,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{(years) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<DatePickerTableRow>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Index each={years()}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{(year) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<DatePickerTableCell value={year().value}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<DatePickerTableCellTrigger>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{year().label}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</DatePickerTableCellTrigger>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</DatePickerTableCell>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Index>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</DatePickerTableRow>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Index>\n\t\t\t\t\t\t\t\t\t\t\t\t</DatePickerTableBody>\n\t\t\t\t\t\t\t\t\t\t\t</DatePickerTable>\n\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</DatePickerContext>\n\t\t\t\t\t\t\t</DatePickerView>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</DatePicker>\n\t\t\t\t</PopoverContent>\n\t\t\t</Popover>\n\t\t</div>\n\t);\n}\n"
    }
  ]
}
